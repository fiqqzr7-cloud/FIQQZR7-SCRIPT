-- FIQQZR7 MAERECORDER - SMOOTH JUMP FIX (ROBLOX NATIVE)
local player = game.Players.LocalPlayer
repeat task.wait() until player and player:FindFirstChild("PlayerGui")

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Variables
local recording = false
local playing = false
local paused = false
local currentPath = {}
local savedPaths = {}
local speed = 1.0
local conn = nil
local humanoid = nil
local loopMode = false
local uiVisible = true
local targetIndex = 1
local startTime = 0
local lastJumpState = false
local jumpPressTime = 0
local jumpActive = false

-- Function untuk get humanoid
local function getHumanoid()
    if player.Character then
        return player.Character:FindFirstChild("Humanoid")
    end
    return nil
end

-- Function untuk get root part
local function getRootPart()
    if player.Character then
        return player.Character:FindFirstChild("HumanoidRootPart") or 
               player.Character:FindFirstChild("Torso") or 
               player.Character:FindFirstChild("UpperTorso")
    end
    return nil
end

-- Function untuk set walk animation
local function setWalkAnimation(speedMultiplier)
    humanoid = getHumanoid()
    if humanoid then
        humanoid.WalkSpeed = 16 * speedMultiplier
    end
end

-- Function untuk reset animation
local function resetAnimation()
    humanoid = getHumanoid()
    if humanoid then
        humanoid.WalkSpeed = 16
        humanoid.Jump = false
        jumpActive = false
    end
end

-- ==============================================
-- SMOOTH JUMP FUNCTION (MACAM ORIGINAL)
-- ==============================================
local function handleJump(jumpState)
    humanoid = getHumanoid()
    if not humanoid then return end
    
    -- Reset jump setiap frame untuk elak stuck
    humanoid.Jump = false
    
    -- Kalau nak jump
    if jumpState then
        -- Trigger jump exactly macam player tekan space
        humanoid.Jump = true
        
        -- Track jump active
        jumpActive = true
        jumpPressTime = tick()
        
        -- Auto release selepas animation (0.2 saat)
        task.spawn(function()
            task.wait(0.2)
            if humanoid and playing then
                humanoid.Jump = false
                jumpActive = false
            end
        end)
    else
        jumpActive = false
    end
end

-- ==============================================
-- MODERN UI SETUP (GLASSMORPHISM + NEON BLUE)
-- ==============================================
local gui = Instance.new("ScreenGui")
gui.Name = "FIQQZR7_MaeRecorder"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = player.PlayerGui

-- Main Container
local Container = Instance.new("Frame")
Container.Size = UDim2.new(0, 300, 0, 420)
Container.Position = UDim2.new(0.5, -150, 0.5, -210)
Container.BackgroundTransparency = 1
Container.Active = true
Container.Draggable = true
Container.Parent = gui

-- Main Frame (Glass Effect)
local Main = Instance.new("Frame")
Main.Size = UDim2.new(1, 0, 1, 0)
Main.Position = UDim2.new(0, 0, 0, 0)
Main.BackgroundColor3 = Color3.fromRGB(8, 12, 20)
Main.BackgroundTransparency = 0.1
Main.BorderColor3 = Color3.fromRGB(0, 150, 255)
Main.BorderSizePixel = 2
Main.ClipsDescendants = true
Main.Parent = Container

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 20)
MainCorner.Parent = Main

-- Glass Blur Effect
local Blur = Instance.new("Frame")
Blur.Size = UDim2.new(1, 0, 1, 0)
Blur.BackgroundColor3 = Color3.fromRGB(10, 15, 25)
Blur.BackgroundTransparency = 0.6
Blur.BorderSizePixel = 0
Blur.ZIndex = 0
Blur.Parent = Main

local BlurCorner = Instance.new("UICorner")
BlurCorner.CornerRadius = UDim.new(0, 20)
BlurCorner.Parent = Blur

-- Neon Glow Border
local Glow = Instance.new("Frame")
Glow.Size = UDim2.new(1, 8, 1, 8)
Glow.Position = UDim2.new(0, -4, 0, -4)
Glow.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
Glow.BackgroundTransparency = 0.8
Glow.BorderSizePixel = 0
Glow.ZIndex = 0
Glow.Parent = Container

local GlowCorner = Instance.new("UICorner")
GlowCorner.CornerRadius = UDim.new(0, 22)
GlowCorner.Parent = Glow

-- Inner Glow
local InnerGlow = Instance.new("Frame")
InnerGlow.Size = UDim2.new(1, 4, 1, 4)
InnerGlow.Position = UDim2.new(0, -2, 0, -2)
InnerGlow.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
InnerGlow.BackgroundTransparency = 0.7
InnerGlow.BorderSizePixel = 0
InnerGlow.ZIndex = 0
InnerGlow.Parent = Container

local InnerGlowCorner = Instance.new("UICorner")
InnerGlowCorner.CornerRadius = UDim.new(0, 21)
InnerGlowCorner.Parent = InnerGlow

-- Gradient Background
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(10, 20, 40)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(5, 15, 35)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 10, 30))
})
Gradient.Rotation = 45
Gradient.Parent = Main

-- ==============================================
-- TITLE BAR MODERN
-- ==============================================
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, -16, 0, 50)
TitleBar.Position = UDim2.new(0, 8, 0, 8)
TitleBar.BackgroundColor3 = Color3.fromRGB(10, 15, 30)
TitleBar.BackgroundTransparency = 0.3
TitleBar.BorderColor3 = Color3.fromRGB(0, 150, 255)
TitleBar.BorderSizePixel = 1
TitleBar.Parent = Main

local TitleBarCorner = Instance.new("UICorner")
TitleBarCorner.CornerRadius = UDim.new(0, 12)
TitleBarCorner.Parent = TitleBar

-- Icon
local Icon = Instance.new("TextLabel")
Icon.Size = UDim2.new(0, 40, 1, 0)
Icon.Position = UDim2.new(0, 8, 0, 0)
Icon.BackgroundTransparency = 1
Icon.Text = "üë£"
Icon.TextColor3 = Color3.fromRGB(0, 200, 255)
Icon.TextSize = 22
Icon.Font = Enum.Font.GothamBold
Icon.Parent = TitleBar

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0.6, 0, 1, 0)
Title.Position = UDim2.new(0, 50, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "RECORD FIQQZR7"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Hide Button (Modern)
local HideBtn = Instance.new("TextButton")
HideBtn.Size = UDim2.new(0, 28, 0, 28)
HideBtn.Position = UDim2.new(1, -65, 0.5, -14)
HideBtn.BackgroundColor3 = Color3.fromRGB(10, 25, 45)
HideBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
HideBtn.BorderSizePixel = 1
HideBtn.TextColor3 = Color3.fromRGB(0, 200, 255)
HideBtn.Text = "‚àí"
HideBtn.Font = Enum.Font.GothamBold
HideBtn.TextSize = 18
HideBtn.Parent = TitleBar

local HideCorner = Instance.new("UICorner")
HideCorner.CornerRadius = UDim.new(0, 8)
HideCorner.Parent = HideBtn

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 28, 0, 28)
CloseBtn.Position = UDim2.new(1, -32, 0.5, -14)
CloseBtn.BackgroundColor3 = Color3.fromRGB(40, 20, 45)
CloseBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
CloseBtn.BorderSizePixel = 1
CloseBtn.TextColor3 = Color3.fromRGB(255, 80, 80)
CloseBtn.Text = "‚úï"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 14
CloseBtn.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseBtn

-- ==============================================
-- CONTENT CONTAINER
-- ==============================================
local ContentContainer = Instance.new("Frame")
ContentContainer.Size = UDim2.new(1, -16, 1, -70)
ContentContainer.Position = UDim2.new(0, 8, 0, 62)
ContentContainer.BackgroundTransparency = 1
ContentContainer.Parent = Main

-- ==============================================
-- SCROLLING FRAME
-- ==============================================
local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, 0, 1, 0)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.BorderSizePixel = 0
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 520)
ScrollingFrame.ScrollBarThickness = 4
ScrollingFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 150, 255)
ScrollingFrame.Parent = ContentContainer

-- ==============================================
-- MODERN CARD FUNCTION
-- ==============================================
local function createCard(y, title, subtitle)
    local Card = Instance.new("Frame")
    Card.Size = UDim2.new(0.95, 0, 0, 40)
    Card.Position = UDim2.new(0.025, 0, 0, y)
    Card.BackgroundColor3 = Color3.fromRGB(10, 15, 30)
    Card.BorderColor3 = Color3.fromRGB(0, 150, 255)
    Card.BorderSizePixel = 1
    Card.Parent = ScrollingFrame

    local CardCorner = Instance.new("UICorner")
    CardCorner.CornerRadius = UDim.new(0, 12)
    CardCorner.Parent = Card

    -- Inner gradient for card
    local CardGradient = Instance.new("UIGradient")
    CardGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 20, 35)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(8, 12, 25))
    })
    CardGradient.Rotation = 90
    CardGradient.Parent = Card

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(0.7, 0, 0.5, 0)
    Title.Position = UDim2.new(0, 12, 0, 6)
    Title.BackgroundTransparency = 1
    Title.Text = title
    Title.TextColor3 = Color3.fromRGB(0, 200, 255)
    Title.TextSize = 13
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = Card

    if subtitle then
        local Subtitle = Instance.new("TextLabel")
        Subtitle.Size = UDim2.new(0.7, 0, 0.4, 0)
        Subtitle.Position = UDim2.new(0, 12, 0, 22)
        Subtitle.BackgroundTransparency = 1
        Subtitle.Text = subtitle
        Subtitle.TextColor3 = Color3.fromRGB(140, 180, 255)
        Subtitle.TextSize = 9
        Subtitle.Font = Enum.Font.Gotham
        Subtitle.TextXAlignment = Enum.TextXAlignment.Left
        Subtitle.Parent = Card
    end

    return Card
end

-- ==============================================
-- STATUS BAR (MODERN)
-- ==============================================
local StatusCard = createCard(5, "STATUS", "Current system state")
local StatusText = Instance.new("TextLabel")
StatusText.Size = UDim2.new(0.4, 0, 1, 0)
StatusText.Position = UDim2.new(0.6, -10, 0, 0)
StatusText.BackgroundTransparency = 1
StatusText.Text = "‚óè READY"
StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
StatusText.TextSize = 12
StatusText.Font = Enum.Font.GothamBold
StatusText.TextXAlignment = Enum.TextXAlignment.Right
StatusText.Parent = StatusCard

-- ==============================================
-- CONTROL BUTTONS (MODERN)
-- ==============================================
local RecordCard = createCard(50, "RECORDING", "Start/stop path recording")
local RecordBtn = Instance.new("TextButton")
RecordBtn.Size = UDim2.new(0.3, 0, 0, 28)
RecordBtn.Position = UDim2.new(0.65, -10, 0.5, -14)
RecordBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
RecordBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
RecordBtn.BorderSizePixel = 1
RecordBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
RecordBtn.Text = "‚è∫ REC"
RecordBtn.Font = Enum.Font.GothamBold
RecordBtn.TextSize = 11
RecordBtn.Parent = RecordCard

local RecordCorner = Instance.new("UICorner")
RecordCorner.CornerRadius = UDim.new(0, 8)
RecordCorner.Parent = RecordBtn

-- Playback Card
local PlayCard = createCard(95, "PLAYBACK", "Control path playback")
local PlayBtn = Instance.new("TextButton")
PlayBtn.Size = UDim2.new(0.3, 0, 0, 28)
PlayBtn.Position = UDim2.new(0.65, -10, 0.5, -14)
PlayBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
PlayBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
PlayBtn.BorderSizePixel = 1
PlayBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayBtn.Text = "‚ñ∂ PLAY"
PlayBtn.Font = Enum.Font.GothamBold
PlayBtn.TextSize = 11
PlayBtn.Parent = PlayCard

local PlayCorner = Instance.new("UICorner")
PlayCorner.CornerRadius = UDim.new(0, 8)
PlayCorner.Parent = PlayBtn

-- ==============================================
-- SPEED CONTROL (MODERN)
-- ==============================================
local SpeedCard = createCard(140, "SPEED", "Adjust playback speed")
local SpeedValue = Instance.new("TextLabel")
SpeedValue.Size = UDim2.new(0.15, 0, 1, 0)
SpeedValue.Position = UDim2.new(0.5, 0, 0, 0)
SpeedValue.BackgroundTransparency = 1
SpeedValue.Text = "1.0x"
SpeedValue.TextColor3 = Color3.fromRGB(0, 200, 255)
SpeedValue.TextSize = 14
SpeedValue.Font = Enum.Font.GothamBold
SpeedValue.TextXAlignment = Enum.TextXAlignment.Center
SpeedValue.Parent = SpeedCard

local SpeedDown = Instance.new("TextButton")
SpeedDown.Size = UDim2.new(0.15, 0, 0, 24)
SpeedDown.Position = UDim2.new(0.65, -5, 0.5, -12)
SpeedDown.BackgroundColor3 = Color3.fromRGB(30, 35, 45)
SpeedDown.BorderColor3 = Color3.fromRGB(0, 150, 255)
SpeedDown.BorderSizePixel = 1
SpeedDown.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedDown.Text = "‚àí"
SpeedDown.Font = Enum.Font.GothamBold
SpeedDown.TextSize = 16
SpeedDown.Parent = SpeedCard

local SpeedDownCorner = Instance.new("UICorner")
SpeedDownCorner.CornerRadius = UDim.new(0, 6)
SpeedDownCorner.Parent = SpeedDown

local SpeedUp = Instance.new("TextButton")
SpeedUp.Size = UDim2.new(0.15, 0, 0, 24)
SpeedUp.Position = UDim2.new(0.8, 0, 0.5, -12)
SpeedUp.BackgroundColor3 = Color3.fromRGB(30, 35, 45)
SpeedUp.BorderColor3 = Color3.fromRGB(0, 150, 255)
SpeedUp.BorderSizePixel = 1
SpeedUp.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedUp.Text = "+"
SpeedUp.Font = Enum.Font.GothamBold
SpeedUp.TextSize = 16
SpeedUp.Parent = SpeedCard

local SpeedUpCorner = Instance.new("UICorner")
SpeedUpCorner.CornerRadius = UDim.new(0, 6)
SpeedUpCorner.Parent = SpeedUp

-- ==============================================
-- LOOP TOGGLE (MODERN)
-- ==============================================
local LoopCard = createCard(185, "LOOP MODE", "Repeat path continuously")
local LoopBtn = Instance.new("TextButton")
LoopBtn.Size = UDim2.new(0.2, 0, 0, 28)
LoopBtn.Position = UDim2.new(0.75, -10, 0.5, -14)
LoopBtn.BackgroundColor3 = Color3.fromRGB(25, 30, 40)
LoopBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
LoopBtn.BorderSizePixel = 1
LoopBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
LoopBtn.Text = "OFF"
LoopBtn.Font = Enum.Font.GothamBold
LoopBtn.TextSize = 11
LoopBtn.Parent = LoopCard

local LoopCorner = Instance.new("UICorner")
LoopCorner.CornerRadius = UDim.new(0, 8)
LoopCorner.Parent = LoopBtn

-- ==============================================
-- SAVE SECTION (MODERN)
-- ==============================================
local SaveCard = createCard(230, "SAVE PATH", "Name and save current path")

local NameBox = Instance.new("TextBox")
NameBox.Size = UDim2.new(0.45, 0, 0, 28)
NameBox.Position = UDim2.new(0.5, -75, 0.5, -14)
NameBox.BackgroundColor3 = Color3.fromRGB(20, 25, 35)
NameBox.BorderColor3 = Color3.fromRGB(0, 150, 255)
NameBox.BorderSizePixel = 1
NameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
NameBox.PlaceholderText = "Name..."
NameBox.PlaceholderColor3 = Color3.fromRGB(100, 120, 150)
NameBox.Text = ""
NameBox.Font = Enum.Font.Gotham
NameBox.TextSize = 11
NameBox.ClearTextOnFocus = false
NameBox.Parent = SaveCard

local NameCorner = Instance.new("UICorner")
NameCorner.CornerRadius = UDim.new(0, 8)
NameCorner.Parent = NameBox

local SaveBtn = Instance.new("TextButton")
SaveBtn.Size = UDim2.new(0.2, 0, 0, 28)
SaveBtn.Position = UDim2.new(0.75, 0, 0.5, -14)
SaveBtn.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
SaveBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
SaveBtn.BorderSizePixel = 1
SaveBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
SaveBtn.Text = "üíæ SAVE"
SaveBtn.Font = Enum.Font.GothamBold
SaveBtn.TextSize = 10
SaveBtn.Parent = SaveCard

local SaveCorner = Instance.new("UICorner")
SaveCorner.CornerRadius = UDim.new(0, 8)
SaveCorner.Parent = SaveBtn

-- ==============================================
-- SAVED PATHS HEADER
-- ==============================================
local HeaderCard = createCard(285, "üìã SAVED PATHS", "Click to load")

-- ==============================================
-- SAVED PATHS LIST (MODERN)
-- ==============================================
local ListContainer = Instance.new("Frame")
ListContainer.Size = UDim2.new(0.95, 0, 0, 140)
ListContainer.Position = UDim2.new(0.025, 0, 0, 330)
ListContainer.BackgroundColor3 = Color3.fromRGB(8, 12, 20)
ListContainer.BorderColor3 = Color3.fromRGB(0, 150, 255)
ListContainer.BorderSizePixel = 1
ListContainer.Parent = ScrollingFrame

local ListCorner = Instance.new("UICorner")
ListCorner.CornerRadius = UDim.new(0, 12)
ListCorner.Parent = ListContainer

local ListScroller = Instance.new("ScrollingFrame")
ListScroller.Size = UDim2.new(1, -10, 1, -10)
ListScroller.Position = UDim2.new(0, 5, 0, 5)
ListScroller.BackgroundTransparency = 1
ListScroller.BorderSizePixel = 0
ListScroller.CanvasSize = UDim2.new(0, 0, 0, 0)
ListScroller.ScrollBarThickness = 4
ListScroller.ScrollBarImageColor3 = Color3.fromRGB(0, 150, 255)
ListScroller.Parent = ListContainer

-- ==============================================
-- FUNGSI REFRESH PATH LIST
-- ==============================================
function refreshPathList()
    for _, child in ipairs(ListScroller:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    ListScroller.CanvasSize = UDim2.new(0, 0, 0, #savedPaths * 45)
    
    for i, path in ipairs(savedPaths) do
        local Item = Instance.new("Frame")
        Item.Size = UDim2.new(1, -5, 0, 40)
        Item.Position = UDim2.new(0, 0, 0, (i-1) * 45)
        Item.BackgroundColor3 = Color3.fromRGB(12, 18, 28)
        Item.BorderColor3 = Color3.fromRGB(0, 150, 255)
        Item.BorderSizePixel = 1
        Item.Parent = ListScroller

        local ItemCorner = Instance.new("UICorner")
        ItemCorner.CornerRadius = UDim.new(0, 8)
        ItemCorner.Parent = Item

        local NameLabel = Instance.new("TextLabel")
        NameLabel.Size = UDim2.new(0.5, 0, 0.5, 0)
        NameLabel.Position = UDim2.new(0, 10, 0, 6)
        NameLabel.BackgroundTransparency = 1
        NameLabel.Text = path.name
        NameLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
        NameLabel.TextSize = 11
        NameLabel.Font = Enum.Font.GothamBold
        NameLabel.TextXAlignment = Enum.TextXAlignment.Left
        NameLabel.Parent = Item

        local PointsLabel = Instance.new("TextLabel")
        PointsLabel.Size = UDim2.new(0.3, 0, 0.3, 0)
        PointsLabel.Position = UDim2.new(0, 10, 0, 22)
        PointsLabel.BackgroundTransparency = 1
        PointsLabel.Text = #path.data .. " points"
        PointsLabel.TextColor3 = Color3.fromRGB(140, 180, 255)
        PointsLabel.TextSize = 8
        PointsLabel.Font = Enum.Font.Gotham
        PointsLabel.TextXAlignment = Enum.TextXAlignment.Left
        PointsLabel.Parent = Item

        local LoadBtn = Instance.new("TextButton")
        LoadBtn.Size = UDim2.new(0.2, 0, 0, 24)
        LoadBtn.Position = UDim2.new(0.6, 0, 0.5, -12)
        LoadBtn.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
        LoadBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
        LoadBtn.BorderSizePixel = 1
        LoadBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        LoadBtn.Text = "LOAD"
        LoadBtn.Font = Enum.Font.GothamBold
        LoadBtn.TextSize = 9
        LoadBtn.Parent = Item

        local LoadCorner = Instance.new("UICorner")
        LoadCorner.CornerRadius = UDim.new(0, 6)
        LoadCorner.Parent = LoadBtn

        local DeleteBtn = Instance.new("TextButton")
        DeleteBtn.Size = UDim2.new(0.15, 0, 0, 24)
        DeleteBtn.Position = UDim2.new(0.8, 0, 0.5, -12)
        DeleteBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        DeleteBtn.BorderColor3 = Color3.fromRGB(0, 150, 255)
        DeleteBtn.BorderSizePixel = 1
        DeleteBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        DeleteBtn.Text = "‚úï"
        DeleteBtn.Font = Enum.Font.GothamBold
        DeleteBtn.TextSize = 10
        DeleteBtn.Parent = Item

        local DeleteCorner = Instance.new("UICorner")
        DeleteCorner.CornerRadius = UDim.new(0, 6)
        DeleteCorner.Parent = DeleteBtn

        -- Load button functionality
        LoadBtn.MouseButton1Click:Connect(function()
            currentPath = {table.unpack(path.data)}
            StatusText.Text = "‚úì LOADED"
            StatusText.TextColor3 = Color3.fromRGB(0, 255, 100)
            task.wait(1)
            StatusText.Text = "‚óè READY"
            StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
        end)

        -- Delete button functionality
        DeleteBtn.MouseButton1Click:Connect(function()
            table.remove(savedPaths, i)
            refreshPathList()
        end)
    end
end

-- ==============================================
-- SMOOTH PLAYBACK FUNCTION (FIXED JUMP)
-- ==============================================
local function startPlayback()
    if #currentPath == 0 then
        StatusText.Text = "‚ùå NO PATH"
        StatusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        task.wait(1)
        StatusText.Text = "‚óè READY"
        StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
        return
    end
    
    playing = true
    paused = false
    recording = false
    startTime = tick()
    targetIndex = 1
    lastJumpState = false
    jumpActive = false
    
    StatusText.Text = "‚óè PLAYING"
    StatusText.TextColor3 = Color3.fromRGB(100, 255, 100)
    PlayBtn.Text = "‚è∏ PAUSE"
    PlayBtn.BackgroundColor3 = Color3.fromRGB(200, 150, 50)
    
    setWalkAnimation(speed)
    
    if conn then conn:Disconnect() end
    conn = RunService.Heartbeat:Connect(function()
        if not playing or paused then return end
        
        local rootPart = getRootPart()
        local humanoid = getHumanoid()
        if not rootPart or not humanoid then return end
        
        local elapsed = (tick() - startTime) * speed
        targetIndex = math.floor(elapsed * 30) + 1
        
        if targetIndex > #currentPath then
            if loopMode then
                startTime = tick()
                targetIndex = 1
                lastJumpState = false
                jumpActive = false
            else
                playing = false
                paused = false
                PlayBtn.Text = "‚ñ∂ PLAY"
                PlayBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
                StatusText.Text = "‚óè READY"
                StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
                resetAnimation()
                return
            end
        end
        
        local frameData = currentPath[targetIndex]
        
        rootPart.CFrame = CFrame.new(frameData.pos)
        rootPart.Velocity = frameData.vel * speed
        
        -- ===== SMOOTH JUMP FIX =====
        -- Reset jump setiap frame (tapi jangan reset kalau dalam animation)
        if not jumpActive then
            humanoid.Jump = false
        end
        
        -- Trigger jump baru
        if frameData.jump and not lastJumpState then
            humanoid.Jump = true
            jumpActive = true
            jumpPressTime = tick()
            
            -- Auto release selepas 0.2 saat (animation length)
            task.spawn(function()
                task.wait(0.2)
                if humanoid and playing then
                    humanoid.Jump = false
                    jumpActive = false
                end
            end)
        end
        
        -- Auto release kalau dah lama sangat jump
        if jumpActive and tick() - jumpPressTime > 0.25 then
            humanoid.Jump = false
            jumpActive = false
        end
        
        lastJumpState = frameData.jump
        -- ============================
        
        if targetIndex < #currentPath then
            local nextPos = currentPath[targetIndex + 1].pos
            local direction = (nextPos - frameData.pos).Unit
            if direction.Magnitude > 0.1 then
                rootPart.CFrame = CFrame.lookAt(rootPart.Position, rootPart.Position + direction)
            end
        end
    end)
end

-- ==============================================
-- BUTTON CONNECTIONS
-- ==============================================
RecordBtn.MouseButton1Click:Connect(function()
    if recording then
        recording = false
        StatusText.Text = "‚èπ STOPPED"
        StatusText.TextColor3 = Color3.fromRGB(255, 200, 100)
        RecordBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        RecordBtn.Text = "‚è∫ REC"
    else
        if playing then
            playing = false
            if conn then conn:Disconnect() end
            resetAnimation()
        end
        recording = true
        currentPath = {}
        StatusText.Text = "‚óè RECORDING"
        StatusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        RecordBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        RecordBtn.Text = "‚è∫ REC"
    end
end)

PlayBtn.MouseButton1Click:Connect(function()
    if playing then
        paused = not paused
        PlayBtn.Text = paused and "‚è∏ PAUSED" or "‚è∏ PAUSE"
        if not paused then
            startTime = tick() - (targetIndex * (1/30))
        end
    else
        startPlayback()
    end
end)

SpeedDown.MouseButton1Click:Connect(function()
    speed = math.max(0.2, speed - 0.2)
    SpeedValue.Text = string.format("%.1fx", speed)
    if playing then
        setWalkAnimation(speed)
    end
end)

SpeedUp.MouseButton1Click:Connect(function()
    speed = math.min(10.0, speed + 0.2)
    SpeedValue.Text = string.format("%.1fx", speed)
    if playing then
        setWalkAnimation(speed)
    end
end)

LoopBtn.MouseButton1Click:Connect(function()
    loopMode = not loopMode
    LoopBtn.Text = loopMode and "ON" or "OFF"
    LoopBtn.BackgroundColor3 = loopMode and Color3.fromRGB(0, 80, 0) or Color3.fromRGB(25, 30, 40)
    LoopBtn.TextColor3 = loopMode and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(200, 200, 200)
end)

SaveBtn.MouseButton1Click:Connect(function()
    local name = NameBox.Text
    if name == "" then
        name = "Path " .. #savedPaths + 1
    end
    
    if #currentPath == 0 then
        StatusText.Text = "‚ùå NO PATH"
        StatusText.TextColor3 = Color3.fromRGB(255, 80, 80)
        task.wait(1)
        StatusText.Text = "‚óè READY"
        StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
        return
    end
    
    table.insert(savedPaths, {
        name = name,
        data = {table.unpack(currentPath)}
    })
    
    StatusText.Text = "‚úì SAVED"
    StatusText.TextColor3 = Color3.fromRGB(0, 255, 100)
    refreshPathList()
    NameBox.Text = ""
    task.wait(1)
    StatusText.Text = "‚óè READY"
    StatusText.TextColor3 = Color3.fromRGB(0, 150, 255)
end)

-- ==============================================
-- HIDE FUNCTION
-- ==============================================
HideBtn.MouseButton1Click:Connect(function()
    uiVisible = not uiVisible
    
    if uiVisible then
        TweenService:Create(Container, TweenInfo.new(0.3), {Size = UDim2.new(0, 300, 0, 420)}):Play()
        task.wait(0.1)
        ContentContainer.Visible = true
        HideBtn.Text = "‚àí"
        HideBtn.TextColor3 = Color3.fromRGB(0, 200, 255)
    else
        ContentContainer.Visible = false
        TweenService:Create(Container, TweenInfo.new(0.3), {Size = UDim2.new(0, 300, 0, 50)}):Play()
        HideBtn.Text = "+"
        HideBtn.TextColor3 = Color3.fromRGB(255, 200, 0)
    end
end)

CloseBtn.MouseButton1Click:Connect(function()
    if playing then
        playing = false
        if conn then conn:Disconnect() end
        resetAnimation()
    end
    gui:Destroy()
end)

-- ==============================================
-- RECORDING LOOP
-- ==============================================
RunService.Heartbeat:Connect(function()
    if recording then
        local rootPart = getRootPart()
        local humanoid = getHumanoid()
        if rootPart and humanoid then
            table.insert(currentPath, {
                pos = rootPart.Position,
                vel = rootPart.Velocity,
                jump = humanoid.Jump
            })
        end
    end
end)

-- Initialize path list
refreshPathList()

print("‚úÖ MAERECORDER - SMOOTH JUMP LIKE ORIGINAL")
print("üéØ Lompat sekarang smooth macam main sendiri!")
